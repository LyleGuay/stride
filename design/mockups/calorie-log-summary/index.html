<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Stride — Calorie Log</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            stride: {
              50:  '#eff6ff',
              100: '#dbeafe',
              200: '#bfdbfe',
              600: '#2563eb',
              700: '#1d4ed8',
            }
          }
        }
      }
    }
  </script>
  <style>
    body { font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif; }
    /* Calorie ring helpers */
    .ring-track { fill: none; stroke: #e5e7eb; stroke-width: 8; }
    .ring-fill  { fill: none; stroke-width: 8; stroke-linecap: round; transform: rotate(-90deg); transform-origin: 50% 50%; }
    /* Smooth tab transitions */
    .tab-content { animation: fadeIn 0.15s ease; }
    @keyframes fadeIn { from { opacity: 0; transform: translateY(4px); } to { opacity: 1; transform: translateY(0); } }
    /* Sticky first column in table */
    .sticky-col { position: sticky; left: 0; z-index: 1; }
    /* Tooltip */
    .bar-tooltip { pointer-events: none; transition: opacity 0.1s; }
  </style>
</head>

<body class="bg-gray-50 min-h-screen">

  <!-- ─── App Shell Header ───────────────────────────────────────────── -->
  <header class="sticky top-0 bg-white/90 backdrop-blur border-b border-gray-200 z-40 px-4 py-3 flex items-center gap-3">
    <button class="p-1 -ml-1 rounded-md hover:bg-gray-100">
      <svg class="w-6 h-6 text-gray-700" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" d="M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"/>
      </svg>
    </button>
    <span class="font-semibold text-gray-800">Stride</span>
    <div class="ml-auto">
      <div class="w-8 h-8 rounded-full bg-stride-600 text-white flex items-center justify-center text-sm font-semibold select-none">L</div>
    </div>
  </header>

  <!-- ─── Page Content ──────────────────────────────────────────────── -->
  <main class="max-w-3xl mx-auto px-4 pt-4 pb-28">

    <!-- ── Segment Control ──────────────────────────────────────────── -->
    <div class="flex bg-gray-100 rounded-lg p-1 mb-4 gap-1">
      <button id="tab-btn-daily" onclick="showTab('daily')"
        class="flex-1 py-1.5 text-sm font-medium rounded-md transition-all bg-white shadow-sm text-gray-900">
        Daily
      </button>
      <button id="tab-btn-summary" onclick="showTab('summary')"
        class="flex-1 py-1.5 text-sm font-medium rounded-md transition-all text-gray-500 hover:text-gray-700">
        Weekly
      </button>
      <button id="tab-btn-monthly" onclick="showTab('monthly')"
        class="flex-1 py-1.5 text-sm font-medium rounded-md transition-all text-gray-500 hover:text-gray-700">
        Monthly
      </button>
    </div>

    <!-- ══════════════════════════════════════════════════════════════ -->
    <!-- DAILY TAB                                                      -->
    <!-- ══════════════════════════════════════════════════════════════ -->
    <div id="tab-daily" class="tab-content">

      <!-- Date Header -->
      <div class="flex items-center justify-between mb-4">
        <button class="p-2 rounded-lg hover:bg-gray-100 text-gray-500 active:bg-gray-200">
          <svg class="w-5 h-5" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" d="M15.75 19.5L8.25 12l7.5-7.5"/>
          </svg>
        </button>
        <div class="text-center">
          <div class="font-semibold text-gray-900">Thursday, Feb 12</div>
          <div class="text-xs text-stride-600 font-medium">Today</div>
        </div>
        <button class="p-2 rounded-lg text-gray-300 cursor-not-allowed">
          <svg class="w-5 h-5" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" d="M8.25 4.5l7.5 7.5-7.5 7.5"/>
          </svg>
        </button>
      </div>

      <!-- Daily Summary Card -->
      <div class="bg-white rounded-xl border border-gray-200 p-4 mb-4 shadow-sm">
        <div class="flex items-center gap-4">
          <!-- Calorie ring (over budget — red) -->
          <div class="relative flex-shrink-0 w-[88px] h-[88px]">
            <svg width="88" height="88" viewBox="0 0 88 88">
              <circle class="ring-track" cx="44" cy="44" r="36"/>
              <!-- 2710/2300 = 117.8% — fill full ring + small overflow indicator -->
              <circle class="ring-fill" cx="44" cy="44" r="36"
                stroke="#ef4444"
                stroke-dasharray="226.2 226.2"
                stroke-dashoffset="0"/>
            </svg>
            <div class="absolute inset-0 flex flex-col items-center justify-center">
              <span class="text-[10px] text-gray-400 leading-none">net</span>
              <span class="text-base font-bold text-gray-900 leading-tight">2,710</span>
              <span class="text-[11px] font-semibold text-red-500 leading-none">-410</span>
            </div>
          </div>

          <!-- Stats grid -->
          <div class="flex-1 grid grid-cols-2 gap-2 text-xs">
            <div class="bg-gray-50 rounded-lg p-2.5">
              <div class="text-gray-400 mb-0.5">Budget</div>
              <div class="font-semibold text-gray-800">2,300</div>
            </div>
            <div class="bg-gray-50 rounded-lg p-2.5">
              <div class="text-gray-400 mb-0.5">Food</div>
              <div class="font-semibold text-gray-800">2,950</div>
            </div>
            <div class="bg-gray-50 rounded-lg p-2.5">
              <div class="text-gray-400 mb-0.5">Exercise</div>
              <div class="font-semibold text-green-600">-240</div>
            </div>
            <div class="bg-red-50 rounded-lg p-2.5">
              <div class="text-gray-400 mb-0.5">Left</div>
              <div class="font-semibold text-red-600">-410</div>
            </div>
          </div>
        </div>

        <!-- Macro strip -->
        <div class="mt-3 pt-3 border-t border-gray-100 grid grid-cols-3 gap-2 text-center text-xs">
          <div>
            <div class="text-gray-400 mb-0.5">Protein</div>
            <div class="font-semibold text-gray-800">126g</div>
            <div class="text-gray-400">24%</div>
          </div>
          <div>
            <div class="text-gray-400 mb-0.5">Carbs</div>
            <div class="font-semibold text-gray-800">193g</div>
            <div class="text-gray-400">37%</div>
          </div>
          <div>
            <div class="text-gray-400 mb-0.5">Fat</div>
            <div class="font-semibold text-gray-800">112g</div>
            <div class="text-gray-400">39%</div>
          </div>
        </div>
      </div>

      <!-- Item Table -->
      <div class="bg-white rounded-xl border border-gray-200 shadow-sm overflow-hidden mb-4">

        <!-- Breakfast section -->
        <div class="px-3 py-2 bg-gray-50 border-b border-gray-100 flex items-center justify-between">
          <span class="text-[11px] font-semibold text-gray-400 uppercase tracking-wider">Breakfast</span>
          <span class="text-xs text-gray-500">320 cal</span>
        </div>
        <div class="divide-y divide-gray-50">
          <div class="px-3 py-2.5 flex justify-between items-center text-sm">
            <span class="text-gray-800">Oatmeal with Berries</span>
            <span class="text-gray-500 text-xs font-mono">320</span>
          </div>
        </div>

        <!-- Lunch section -->
        <div class="px-3 py-2 bg-gray-50 border-b border-gray-100 border-t border-gray-100 flex items-center justify-between">
          <span class="text-[11px] font-semibold text-gray-400 uppercase tracking-wider">Lunch</span>
          <span class="text-xs text-gray-500">790 cal</span>
        </div>
        <div class="divide-y divide-gray-50">
          <div class="px-3 py-2.5 flex justify-between items-center text-sm">
            <span class="text-gray-800">Chicken Caesar Wrap</span>
            <span class="text-gray-500 text-xs font-mono">530</span>
          </div>
          <div class="px-3 py-2.5 flex justify-between items-center text-sm">
            <span class="text-gray-800">Greek Yogurt</span>
            <span class="text-gray-500 text-xs font-mono">150</span>
          </div>
          <div class="px-3 py-2.5 flex justify-between items-center text-sm">
            <span class="text-gray-800">Apple</span>
            <span class="text-gray-500 text-xs font-mono">110</span>
          </div>
        </div>

        <!-- Dinner section -->
        <div class="px-3 py-2 bg-gray-50 border-b border-gray-100 border-t border-gray-100 flex items-center justify-between">
          <span class="text-[11px] font-semibold text-gray-400 uppercase tracking-wider">Dinner</span>
          <span class="text-xs text-gray-500">1,060 cal</span>
        </div>
        <div class="divide-y divide-gray-50">
          <div class="px-3 py-2.5 flex justify-between items-center text-sm">
            <span class="text-gray-800">Beef Tacos (3)</span>
            <span class="text-gray-500 text-xs font-mono">720</span>
          </div>
          <div class="px-3 py-2.5 flex justify-between items-center text-sm">
            <span class="text-gray-800">Tortilla Chips &amp; Salsa</span>
            <span class="text-gray-500 text-xs font-mono">340</span>
          </div>
        </div>

        <!-- Snack section -->
        <div class="px-3 py-2 bg-gray-50 border-b border-gray-100 border-t border-gray-100 flex items-center justify-between">
          <span class="text-[11px] font-semibold text-gray-400 uppercase tracking-wider">Snack</span>
          <span class="text-xs text-gray-500">540 cal</span>
        </div>
        <div class="divide-y divide-gray-50">
          <div class="px-3 py-2.5 flex justify-between items-center text-sm">
            <span class="text-gray-800">Banana Smoothie</span>
            <span class="text-gray-500 text-xs font-mono">360</span>
          </div>
          <div class="px-3 py-2.5 flex justify-between items-center text-sm">
            <span class="text-gray-800">Protein Bar</span>
            <span class="text-gray-500 text-xs font-mono">180</span>
          </div>
        </div>

        <!-- Exercise section (green tint) -->
        <div class="px-3 py-2 bg-green-50 border-b border-gray-100 border-t border-gray-100 flex items-center justify-between">
          <span class="text-[11px] font-semibold text-green-500 uppercase tracking-wider">Exercise</span>
          <span class="text-xs text-green-600">-240 cal</span>
        </div>
        <div class="divide-y divide-gray-50">
          <div class="px-3 py-2.5 flex justify-between items-center text-sm">
            <span class="text-gray-800">Walk — 3.2 mi</span>
            <span class="text-green-600 text-xs font-mono">-240</span>
          </div>
        </div>

        <!-- Totals row -->
        <div class="px-3 py-2.5 border-t border-gray-200 bg-gray-50 flex justify-between items-center text-xs font-semibold">
          <span class="text-gray-600">Daily Total</span>
          <span class="text-red-600">2,710 <span class="text-gray-400 font-normal">/ 2,300</span></span>
        </div>

        <!-- Inline add placeholder -->
        <div class="px-3 py-2.5 border-t border-gray-100 text-xs text-gray-300 italic text-center">
          + Add item...
        </div>
      </div>

    </div><!-- /daily tab -->


    <!-- ══════════════════════════════════════════════════════════════ -->
    <!-- SUMMARY TAB                                                    -->
    <!-- ══════════════════════════════════════════════════════════════ -->
    <div id="tab-summary" class="tab-content hidden">

      <!-- Week Navigator -->
      <div class="flex items-center justify-between mb-4">
        <button class="p-2 rounded-lg hover:bg-gray-100 text-gray-500 active:bg-gray-200">
          <svg class="w-5 h-5" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" d="M15.75 19.5L8.25 12l7.5-7.5"/>
          </svg>
        </button>
        <div class="text-center">
          <div class="font-semibold text-gray-900">Feb 9 – Feb 15</div>
          <div class="text-xs text-stride-600 font-medium">Current week</div>
        </div>
        <!-- Right arrow disabled (current week) -->
        <button class="p-2 rounded-lg text-gray-200 cursor-not-allowed">
          <svg class="w-5 h-5" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" d="M8.25 4.5l7.5 7.5-7.5 7.5"/>
          </svg>
        </button>
      </div>

      <!-- Weekly Stats Cards -->
      <div class="grid grid-cols-3 gap-2 mb-4">
        <div class="bg-white rounded-xl border border-gray-200 p-3 text-center shadow-sm">
          <div class="text-[11px] text-gray-400 mb-1 font-medium uppercase tracking-wide">Food</div>
          <div class="text-xl font-bold text-gray-900 leading-tight">9,150</div>
          <div class="text-[10px] text-gray-400 mt-0.5">cal so far</div>
        </div>
        <div class="bg-white rounded-xl border border-gray-200 p-3 text-center shadow-sm">
          <div class="text-[11px] text-gray-400 mb-1 font-medium uppercase tracking-wide">Exercise</div>
          <div class="text-xl font-bold text-green-600 leading-tight">424</div>
          <div class="text-[10px] text-gray-400 mt-0.5">cal burned</div>
        </div>
        <div class="bg-white rounded-xl border border-gray-200 p-3 text-center shadow-sm">
          <div class="text-[11px] text-gray-400 mb-1 font-medium uppercase tracking-wide">Budget</div>
          <div class="text-xl font-bold text-gray-900 leading-tight">16,100</div>
          <div class="text-[10px] text-gray-400 mt-0.5">cal / week</div>
        </div>
      </div>

      <!-- Weekly Bar Chart Card -->
      <div class="bg-white rounded-xl border border-gray-200 p-4 mb-4 shadow-sm">
        <div class="flex items-center justify-between mb-3">
          <h3 class="text-sm font-semibold text-gray-700">Net Calories This Week</h3>
          <span class="text-[11px] font-semibold text-red-600 bg-red-50 px-2 py-0.5 rounded-full whitespace-nowrap">
            2,476 over budget
          </span>
        </div>

        <!-- SVG bar chart
             Chart area: x 30–410 (380px), y 15–130 (115px tall)
             Y range: 0–4000 cal. y(v) = 130 - (v/4000)*115
             Budget 2300: y = 130 - (2300/4000)*115 = 63.9
             Bar slot width: 380/7 = 54.3px, bar width 30px
             Center x per day: 30 + (i+0.5)*54.3
             Data (Mon-Thu logged, Fri-Sun = no data):
               Mon 2236 GREEN, Tue 3560 RED, Wed 3170 RED, Thu 2710 RED, Fri/Sat/Sun no data
        -->
        <div class="w-full overflow-x-auto -mx-1 px-1">
          <svg viewBox="0 0 430 170" class="w-full" style="min-width:300px;" id="week-chart">

            <!-- Horizontal grid lines -->
            <line x1="30" y1="15" x2="415" y2="15" stroke="#f3f4f6" stroke-width="1"/>
            <line x1="30" y1="43.6" x2="415" y2="43.6" stroke="#f3f4f6" stroke-width="1"/>
            <line x1="30" y1="72.25" x2="415" y2="72.25" stroke="#f3f4f6" stroke-width="1"/>
            <line x1="30" y1="100.9" x2="415" y2="100.9" stroke="#f3f4f6" stroke-width="1"/>
            <line x1="30" y1="130" x2="415" y2="130" stroke="#f3f4f6" stroke-width="1"/>

            <!-- Y-axis labels -->
            <text x="26" y="19"    text-anchor="end" font-size="8.5" fill="#d1d5db">4k</text>
            <text x="26" y="47.6"  text-anchor="end" font-size="8.5" fill="#d1d5db">3k</text>
            <text x="26" y="76.25" text-anchor="end" font-size="8.5" fill="#d1d5db">2k</text>
            <text x="26" y="104.9" text-anchor="end" font-size="8.5" fill="#d1d5db">1k</text>

            <!-- Budget line at y=63.9 (2300 cal) — dashed blue -->
            <line x1="30" y1="63.9" x2="415" y2="63.9" stroke="#2563eb" stroke-width="1.5" stroke-dasharray="5,3" opacity="0.7"/>
            <text x="417" y="67" font-size="8" fill="#2563eb" opacity="0.8">2,300</text>

            <!--
              Bar slot width = 54.3. Centers: 57.15, 111.45, 165.75, 220.05, 274.35, 328.65, 382.95
              Bar left x = center - 15 = 42.15, 96.45, 150.75, 205.05, 259.35, 313.65, 367.95
              y(v) = 130 - (v/4000)*115
              height = 130 - y(v) = (v/4000)*115
            -->

            <!-- MON 2236 — GREEN (under budget) -->
            <!-- y = 130-(2236/4000)*115 = 130-64.3 = 65.7, h = 64.3 -->
            <rect x="42" y="65.7" width="30" height="64.3" fill="#22c55e" rx="3" opacity="0.85"
              class="cursor-pointer hover:opacity-100"
              onmouseenter="showTip(event,'Mon Feb 9','2,236','+64')"
              onmouseleave="hideTip()"/>

            <!-- TUE 3560 — RED (over budget) -->
            <!-- y = 130-(3560/4000)*115 = 130-102.2 = 27.8, h = 102.2 -->
            <rect x="96" y="27.8" width="30" height="102.2" fill="#ef4444" rx="3" opacity="0.85"
              class="cursor-pointer hover:opacity-100"
              onmouseenter="showTip(event,'Tue Feb 10','3,560','-1,260')"
              onmouseleave="hideTip()"/>

            <!-- WED 3170 — RED -->
            <!-- y = 130-(3170/4000)*115 = 130-91.1 = 38.9, h = 91.1 -->
            <rect x="150" y="38.9" width="30" height="91.1" fill="#ef4444" rx="3" opacity="0.85"
              class="cursor-pointer hover:opacity-100"
              onmouseenter="showTip(event,'Wed Feb 11','3,170','-870')"
              onmouseleave="hideTip()"/>

            <!-- THU 2710 — RED (today, highlighted ring) -->
            <!-- y = 130-(2710/4000)*115 = 130-77.9 = 52.1, h = 77.9 -->
            <rect x="204" y="52.1" width="30" height="77.9" fill="#ef4444" rx="3" opacity="0.85"
              class="cursor-pointer hover:opacity-100"
              onmouseenter="showTip(event,'Thu Feb 12 (today)','2,710','-410')"
              onmouseleave="hideTip()"/>
            <!-- Today indicator dot -->
            <circle cx="219" cy="48.1" r="3" fill="#2563eb"/>

            <!-- FRI — no data -->
            <rect x="258" y="110" width="30" height="20" fill="#f3f4f6" rx="3"/>
            <text x="273" y="122" text-anchor="middle" font-size="9" fill="#d1d5db">—</text>

            <!-- SAT — no data -->
            <rect x="312" y="110" width="30" height="20" fill="#f3f4f6" rx="3"/>
            <text x="327" y="122" text-anchor="middle" font-size="9" fill="#d1d5db">—</text>

            <!-- SUN — no data -->
            <rect x="366" y="110" width="30" height="20" fill="#f3f4f6" rx="3"/>
            <text x="381" y="122" text-anchor="middle" font-size="9" fill="#d1d5db">—</text>

            <!-- Day labels -->
            <text x="57"  y="144" text-anchor="middle" font-size="9.5" fill="#6b7280">Mon</text>
            <text x="111" y="144" text-anchor="middle" font-size="9.5" fill="#6b7280">Tue</text>
            <text x="165" y="144" text-anchor="middle" font-size="9.5" fill="#6b7280">Wed</text>
            <text x="219" y="144" text-anchor="middle" font-size="9.5" fill="#2563eb" font-weight="600">Thu</text>
            <text x="273" y="144" text-anchor="middle" font-size="9.5" fill="#d1d5db">Fri</text>
            <text x="327" y="144" text-anchor="middle" font-size="9.5" fill="#d1d5db">Sat</text>
            <text x="381" y="144" text-anchor="middle" font-size="9.5" fill="#d1d5db">Sun</text>

            <!-- Date numbers -->
            <text x="57"  y="156" text-anchor="middle" font-size="8" fill="#9ca3af">9</text>
            <text x="111" y="156" text-anchor="middle" font-size="8" fill="#9ca3af">10</text>
            <text x="165" y="156" text-anchor="middle" font-size="8" fill="#9ca3af">11</text>
            <text x="219" y="156" text-anchor="middle" font-size="8" fill="#2563eb">12</text>
            <text x="273" y="156" text-anchor="middle" font-size="8" fill="#d1d5db">13</text>
            <text x="327" y="156" text-anchor="middle" font-size="8" fill="#d1d5db">14</text>
            <text x="381" y="156" text-anchor="middle" font-size="8" fill="#d1d5db">15</text>

            <!-- Tooltip (hidden by default) -->
            <g id="chart-tooltip" class="bar-tooltip" opacity="0">
              <rect id="tip-bg" x="0" y="0" width="110" height="48" rx="5" fill="#1f2937"/>
              <text id="tip-date" x="8" y="15" font-size="9" fill="#9ca3af"></text>
              <text id="tip-net-label" x="8" y="28" font-size="9" fill="#9ca3af">Net calories</text>
              <text id="tip-net" x="102" y="28" font-size="9" fill="white" text-anchor="end" font-weight="600"></text>
              <text id="tip-left-label" x="8" y="41" font-size="9" fill="#9ca3af">vs. budget</text>
              <text id="tip-left" x="102" y="41" font-size="9" text-anchor="end" font-weight="600"></text>
            </g>

          </svg>
        </div>

        <!-- Chart legend -->
        <div class="flex flex-wrap items-center gap-x-4 gap-y-1 mt-1 text-[11px] text-gray-500">
          <div class="flex items-center gap-1.5">
            <div class="w-2.5 h-2.5 rounded bg-green-500 opacity-85"></div>
            Under budget
          </div>
          <div class="flex items-center gap-1.5">
            <div class="w-2.5 h-2.5 rounded bg-red-500 opacity-85"></div>
            Over budget
          </div>
          <div class="flex items-center gap-1.5">
            <svg width="16" height="8" viewBox="0 0 16 8">
              <line x1="0" y1="4" x2="16" y2="4" stroke="#2563eb" stroke-width="1.5" stroke-dasharray="4,2" opacity="0.7"/>
            </svg>
            Budget (2,300)
          </div>
          <div class="flex items-center gap-1.5">
            <div class="w-2.5 h-2.5 rounded bg-gray-200"></div>
            No data
          </div>
        </div>
      </div>

      <!-- Estimated Weight Impact Card -->
      <div class="bg-white rounded-xl border border-gray-200 p-4 mb-4 shadow-sm">
        <div class="flex items-start gap-3">
          <div class="flex-1">
            <h3 class="text-sm font-semibold text-gray-700">Estimated Weight Impact</h3>
            <p class="text-[11px] text-gray-400 mt-0.5">Based on 4 of 7 days tracked this week</p>
            <!-- Progress bar: how much of week budget consumed -->
            <div class="mt-2.5">
              <div class="flex justify-between text-[11px] text-gray-400 mb-1">
                <span>8,726 net cal consumed</span>
                <span>9,200 week budget (4 days)</span>
              </div>
              <div class="h-1.5 bg-gray-100 rounded-full overflow-hidden">
                <div class="h-full bg-red-400 rounded-full" style="width: 94.8%"></div>
              </div>
            </div>
          </div>
          <div class="text-right flex-shrink-0">
            <div class="text-2xl font-bold text-red-500 leading-tight">+0.7 lbs</div>
            <div class="text-[10px] text-gray-400 mt-0.5">above goal pace</div>
          </div>
        </div>

        <div class="mt-3 pt-3 border-t border-gray-100 flex items-start gap-2 text-[11px] text-gray-400">
          <svg class="w-3.5 h-3.5 flex-shrink-0 mt-0.5 text-gray-300" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" d="M11.25 11.25l.041-.02a.75.75 0 011.063.852l-.708 2.836a.75.75 0 001.063.853l.041-.021M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-9-3.75h.008v.008H12V8.25z"/>
          </svg>
          <span>2,476 cal over 4-day budget ÷ 3,500 cal/lb ≈ 0.7 lbs. Your budget already targets your desired loss rate — staying at budget = on pace.</span>
        </div>
      </div>

      <!-- Day Summaries Table -->
      <div class="bg-white rounded-xl border border-gray-200 shadow-sm overflow-hidden">
        <div class="px-4 py-3 border-b border-gray-100 flex items-center justify-between">
          <h3 class="text-sm font-semibold text-gray-700">Day Summaries</h3>
          <span class="text-[11px] text-gray-400">Feb 9 – 15</span>
        </div>

        <div class="overflow-x-auto">
          <table class="w-full text-xs whitespace-nowrap">
            <thead>
              <tr class="bg-gray-50 text-gray-400 text-[10px] uppercase tracking-wide">
                <th class="sticky-col bg-gray-50 px-3 py-2 text-left font-medium border-r border-gray-100">Date</th>
                <th class="px-2 py-2 text-right font-medium">Budget</th>
                <th class="px-2 py-2 text-right font-medium">Food</th>
                <th class="px-2 py-2 text-right font-medium">Exer.</th>
                <th class="px-2 py-2 text-right font-medium">Net</th>
                <th class="px-2 py-2 text-right font-medium pr-3">Left</th>
                <th class="px-2 py-2 text-right font-medium border-l border-gray-100">Pro. g</th>
                <th class="px-2 py-2 text-right font-medium">Carbs g</th>
                <th class="px-2 py-2 text-right font-medium pr-3">Fat g</th>
              </tr>
            </thead>
            <tbody class="divide-y divide-gray-50">

              <!-- Mon Feb 9 — under budget (green Left) -->
              <tr class="hover:bg-gray-50 transition-colors">
                <td class="sticky-col bg-white px-3 py-2.5 border-r border-gray-100">
                  <div class="font-semibold text-gray-700">Mon</div>
                  <div class="text-gray-400 font-normal">Feb 9</div>
                </td>
                <td class="px-2 py-2.5 text-right text-gray-500">2,300</td>
                <td class="px-2 py-2.5 text-right text-gray-700">2,420</td>
                <td class="px-2 py-2.5 text-right text-green-600">184</td>
                <td class="px-2 py-2.5 text-right font-semibold text-gray-800">2,236</td>
                <td class="px-2 py-2.5 text-right font-semibold text-green-600 pr-3">+64</td>
                <td class="px-2 py-2.5 text-right text-gray-500 border-l border-gray-100">97</td>
                <td class="px-2 py-2.5 text-right text-gray-500">200</td>
                <td class="px-2 py-2.5 text-right text-gray-500 pr-3">97.5</td>
              </tr>

              <!-- Tue Feb 10 — over budget (red Left) -->
              <tr class="hover:bg-gray-50 transition-colors">
                <td class="sticky-col bg-white px-3 py-2.5 border-r border-gray-100">
                  <div class="font-semibold text-gray-700">Tue</div>
                  <div class="text-gray-400 font-normal">Feb 10</div>
                </td>
                <td class="px-2 py-2.5 text-right text-gray-500">2,300</td>
                <td class="px-2 py-2.5 text-right text-gray-700">3,560</td>
                <td class="px-2 py-2.5 text-right text-gray-300">—</td>
                <td class="px-2 py-2.5 text-right font-semibold text-gray-800">3,560</td>
                <td class="px-2 py-2.5 text-right font-semibold text-red-600 pr-3">-1,260</td>
                <td class="px-2 py-2.5 text-right text-gray-500 border-l border-gray-100">169</td>
                <td class="px-2 py-2.5 text-right text-gray-500">324</td>
                <td class="px-2 py-2.5 text-right text-gray-500 pr-3">68.5</td>
              </tr>

              <!-- Wed Feb 11 -->
              <tr class="hover:bg-gray-50 transition-colors">
                <td class="sticky-col bg-white px-3 py-2.5 border-r border-gray-100">
                  <div class="font-semibold text-gray-700">Wed</div>
                  <div class="text-gray-400 font-normal">Feb 11</div>
                </td>
                <td class="px-2 py-2.5 text-right text-gray-500">2,300</td>
                <td class="px-2 py-2.5 text-right text-gray-700">3,170</td>
                <td class="px-2 py-2.5 text-right text-gray-300">—</td>
                <td class="px-2 py-2.5 text-right font-semibold text-gray-800">3,170</td>
                <td class="px-2 py-2.5 text-right font-semibold text-red-600 pr-3">-870</td>
                <td class="px-2 py-2.5 text-right text-gray-500 border-l border-gray-100">119</td>
                <td class="px-2 py-2.5 text-right text-gray-500">219</td>
                <td class="px-2 py-2.5 text-right text-gray-500 pr-3">112.5</td>
              </tr>

              <!-- Thu Feb 12 — TODAY (blue tint) -->
              <tr class="bg-blue-50/40 hover:bg-blue-50/60 transition-colors">
                <td class="sticky-col bg-blue-50/40 px-3 py-2.5 border-r border-blue-100">
                  <div class="font-semibold text-stride-700 flex items-center gap-1">
                    Thu
                    <span class="text-[9px] font-medium text-stride-600 bg-stride-100 px-1 py-0.5 rounded">today</span>
                  </div>
                  <div class="text-stride-400 font-normal">Feb 12</div>
                </td>
                <td class="px-2 py-2.5 text-right text-gray-500">2,300</td>
                <td class="px-2 py-2.5 text-right text-gray-700">2,950</td>
                <td class="px-2 py-2.5 text-right text-green-600">240</td>
                <td class="px-2 py-2.5 text-right font-semibold text-gray-800">2,710</td>
                <td class="px-2 py-2.5 text-right font-semibold text-red-600 pr-3">-410</td>
                <td class="px-2 py-2.5 text-right text-gray-500 border-l border-gray-100">126</td>
                <td class="px-2 py-2.5 text-right text-gray-500">193</td>
                <td class="px-2 py-2.5 text-right text-gray-500 pr-3">111.5</td>
              </tr>

              <!-- Fri Feb 13 — future (dimmed) -->
              <tr class="opacity-35">
                <td class="sticky-col bg-white px-3 py-2.5 border-r border-gray-100">
                  <div class="font-semibold text-gray-400">Fri</div>
                  <div class="text-gray-300 font-normal">Feb 13</div>
                </td>
                <td class="px-2 py-2.5 text-right text-gray-400">2,300</td>
                <td colspan="7" class="px-2 py-2.5 text-center text-gray-300 italic text-[11px]">No entries yet</td>
              </tr>

              <!-- Sat Feb 14 — future -->
              <tr class="opacity-35">
                <td class="sticky-col bg-white px-3 py-2.5 border-r border-gray-100">
                  <div class="font-semibold text-gray-400">Sat</div>
                  <div class="text-gray-300 font-normal">Feb 14</div>
                </td>
                <td class="px-2 py-2.5 text-right text-gray-400">2,300</td>
                <td colspan="7" class="px-2 py-2.5 text-center text-gray-300 italic text-[11px]">No entries yet</td>
              </tr>

              <!-- Sun Feb 15 — future -->
              <tr class="opacity-35">
                <td class="sticky-col bg-white px-3 py-2.5 border-r border-gray-100">
                  <div class="font-semibold text-gray-400">Sun</div>
                  <div class="text-gray-300 font-normal">Feb 15</div>
                </td>
                <td class="px-2 py-2.5 text-right text-gray-400">2,300</td>
                <td colspan="7" class="px-2 py-2.5 text-center text-gray-300 italic text-[11px]">No entries yet</td>
              </tr>

              <!-- Totals row (4 days tracked) -->
              <tr class="bg-gray-50 font-semibold border-t border-gray-200">
                <td class="sticky-col bg-gray-50 px-3 py-2.5 text-gray-600 border-r border-gray-100">
                  <div>Total</div>
                  <div class="font-normal text-gray-400 text-[10px]">4 days</div>
                </td>
                <td class="px-2 py-2.5 text-right text-gray-500">9,200</td>
                <td class="px-2 py-2.5 text-right text-gray-700">12,100</td>
                <td class="px-2 py-2.5 text-right text-green-600">424</td>
                <td class="px-2 py-2.5 text-right text-gray-800">11,676</td>
                <td class="px-2 py-2.5 text-right text-red-600 pr-3">-2,476</td>
                <td class="px-2 py-2.5 text-right text-gray-500 border-l border-gray-100">511</td>
                <td class="px-2 py-2.5 text-right text-gray-500">936</td>
                <td class="px-2 py-2.5 text-right text-gray-500 pr-3">390</td>
              </tr>

            </tbody>
          </table>
        </div>
      </div>

    </div><!-- /summary tab -->


    <!-- ══════════════════════════════════════════════════════════════ -->
    <!-- MONTHLY TAB                                                    -->
    <!-- ══════════════════════════════════════════════════════════════ -->
    <div id="tab-monthly" class="tab-content hidden">

      <!-- Month Navigator -->
      <div class="flex items-center justify-between mb-4">
        <button class="p-2 rounded-lg hover:bg-gray-100 text-gray-500">
          <svg class="w-5 h-5" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" d="M15.75 19.5L8.25 12l7.5-7.5"/>
          </svg>
        </button>
        <div class="text-center">
          <div class="font-semibold text-gray-900">February 2026</div>
          <div class="text-xs text-stride-600 font-medium">Current month</div>
        </div>
        <button class="p-2 rounded-lg text-gray-200 cursor-not-allowed">
          <svg class="w-5 h-5" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" d="M8.25 4.5l7.5 7.5-7.5 7.5"/>
          </svg>
        </button>
      </div>

      <!-- Weight graph card -->
      <div class="bg-white rounded-xl border border-gray-200 p-4 mb-4 shadow-sm">
        <div class="flex items-center justify-between mb-3">
          <h3 class="text-sm font-semibold text-gray-700">Weight</h3>
          <span class="text-xs text-green-600 bg-green-50 px-2 py-0.5 rounded-full font-medium">−4.2 lbs this month</span>
        </div>

        <!--
          Weight data for Feb 2026 (logged weekly):
          Feb 1: 234, Feb 8: 232.5, Feb 15: 230 (current)
          Y range: 226–236. Chart: x 20–400, y 15–120 (105px)
          y(w) = 120 - ((w-226)/10)*105
          Feb 1 (234): y = 120 - (8/10)*105 = 120-84 = 36
          Feb 8 (232.5): y = 120 - (6.5/10)*105 = 120-68.25 = 51.75
          Feb 15 (230): y = 120 - (4/10)*105 = 120-42 = 78
          Target (170): way off chart — show as annotation instead
        -->
        <svg viewBox="0 0 420 140" class="w-full" style="min-width:280px;">
          <!-- Grid -->
          <line x1="20" y1="15" x2="405" y2="15" stroke="#f3f4f6" stroke-width="1"/>
          <line x1="20" y1="42" x2="405" y2="42" stroke="#f3f4f6" stroke-width="1"/>
          <line x1="20" y1="68" x2="405" y2="68" stroke="#f3f4f6" stroke-width="1"/>
          <line x1="20" y1="95" x2="405" y2="95" stroke="#f3f4f6" stroke-width="1"/>
          <line x1="20" y1="120" x2="405" y2="120" stroke="#f3f4f6" stroke-width="1"/>

          <!-- Y labels -->
          <text x="16" y="19"  text-anchor="end" font-size="8.5" fill="#d1d5db">236</text>
          <text x="16" y="46"  text-anchor="end" font-size="8.5" fill="#d1d5db">233</text>
          <text x="16" y="72"  text-anchor="end" font-size="8.5" fill="#d1d5db">230</text>
          <text x="16" y="99"  text-anchor="end" font-size="8.5" fill="#d1d5db">227</text>

          <!-- Goal line (170 lbs) — shown as annotation since it's off chart -->
          <text x="405" y="130" text-anchor="end" font-size="8" fill="#9ca3af">Goal: 170 lbs (not in range)</text>

          <!-- Area fill under line -->
          <defs>
            <linearGradient id="weight-grad" x1="0" y1="0" x2="0" y2="1">
              <stop offset="0%" stop-color="#2563eb" stop-opacity="0.15"/>
              <stop offset="100%" stop-color="#2563eb" stop-opacity="0"/>
            </linearGradient>
          </defs>
          <!-- Points: Feb 1 (x=60,y=36), Feb 8 (x=165,y=51.75), Feb 15 (x=270,y=78) -->
          <path d="M60,36 L165,51.75 L270,78 L270,120 L60,120 Z" fill="url(#weight-grad)"/>

          <!-- Line -->
          <polyline points="60,36 165,51.75 270,78"
            fill="none" stroke="#2563eb" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"/>

          <!-- Data points -->
          <circle cx="60" cy="36" r="4" fill="#2563eb" stroke="white" stroke-width="2"/>
          <circle cx="165" cy="51.75" r="4" fill="#2563eb" stroke="white" stroke-width="2"/>
          <circle cx="270" cy="78" r="5" fill="#2563eb" stroke="white" stroke-width="2.5"/>

          <!-- Value labels above points -->
          <text x="60"  y="28" text-anchor="middle" font-size="9" fill="#2563eb" font-weight="600">234</text>
          <text x="165" y="43" text-anchor="middle" font-size="9" fill="#2563eb" font-weight="600">232.5</text>
          <text x="270" y="70" text-anchor="middle" font-size="9" fill="#2563eb" font-weight="600">230 ●</text>

          <!-- X-axis labels -->
          <text x="60"  y="134" text-anchor="middle" font-size="9" fill="#9ca3af">Feb 1</text>
          <text x="165" y="134" text-anchor="middle" font-size="9" fill="#9ca3af">Feb 8</text>
          <text x="270" y="134" text-anchor="middle" font-size="9" fill="#2563eb" font-weight="600">Feb 15</text>
        </svg>

        <!-- Weight stats row -->
        <div class="grid grid-cols-3 gap-2 mt-2 pt-3 border-t border-gray-100 text-center text-xs">
          <div>
            <div class="text-gray-400 mb-0.5">Start of month</div>
            <div class="font-semibold text-gray-800">234 lbs</div>
          </div>
          <div>
            <div class="text-gray-400 mb-0.5">Current</div>
            <div class="font-semibold text-gray-800">230 lbs</div>
          </div>
          <div>
            <div class="text-gray-400 mb-0.5">To goal</div>
            <div class="font-semibold text-gray-800">60 lbs</div>
          </div>
        </div>
      </div>

      <!-- Monthly calorie adherence card -->
      <div class="bg-white rounded-xl border border-gray-200 p-4 mb-4 shadow-sm">
        <div class="flex items-center justify-between mb-3">
          <h3 class="text-sm font-semibold text-gray-700">Calorie Budget Adherence</h3>
          <span class="text-xs text-gray-400">Feb 1–12</span>
        </div>
        <!-- Mini bar chart showing each day's net vs budget, compressed for monthly view -->
        <svg viewBox="0 0 420 80" class="w-full" style="min-width:280px;">
          <!-- Budget line -->
          <line x1="20" y1="20" x2="405" y2="20" stroke="#2563eb" stroke-width="1" stroke-dasharray="4,3" opacity="0.5"/>
          <text x="407" y="23" font-size="7.5" fill="#2563eb" opacity="0.7">2,300</text>

          <!-- 12 days of bars (Feb 1-12). Bar slot width = (385)/28 = 13.75px, bar = 8px -->
          <!-- y(v) = 65 - (v/3800)*45. Budget 2300: y = 65-(2300/3800)*45 = 65-27.2 = 37.8 ≈ 38 but we drew line at 20 -->
          <!-- Let me use y range 15-65 (50px), data range 0-4000 -->
          <!-- y(v) = 65 - (v/4000)*50; budget 2300: y=65-28.75=36.25... not matching line at 20 -->
          <!-- Let me place budget line dynamically: max=3600, y = 65-(v/3600)*50 -->
          <!-- budget 2300: y = 65-(2300/3600)*50 = 65-31.9=33.1. Put line at y=33. -->
          <!-- Reposition budget line -->

          <!-- Using: y(v) = 65 - (v/3600)*50. Budget=2300 at y=33 -->
          <!-- Bar x: slot=385/28=13.75, bar=8px, center at 20+slot*(i+0.5) for i=0..11 -->

          <!-- Budget line at y=33 -->
          <line x1="20" y1="33" x2="405" y2="33" stroke="#2563eb" stroke-width="1.5" stroke-dasharray="4,3" opacity="0.6"/>

          <!-- Day 1 Feb: ~2840 RED; x center = 20+13.75*0.5=26.9 -->
          <rect x="22.9" y="24.6" width="8" height="40.4" fill="#ef4444" rx="1.5" opacity="0.75"/>
          <!-- Day 2: ~3240 RED -->
          <rect x="36.6" y="20" width="8" height="45" fill="#ef4444" rx="1.5" opacity="0.75"/>
          <!-- Day 3: ~2920 RED -->
          <rect x="50.4" y="24.4" width="8" height="40.6" fill="#ef4444" rx="1.5" opacity="0.75"/>
          <!-- Day 4: ~2090 GREEN (2090<2300) -->
          <rect x="64.1" y="36" width="8" height="29" fill="#22c55e" rx="1.5" opacity="0.75"/>
          <!-- Day 5: ~2470 RED -->
          <rect x="77.9" y="30.7" width="8" height="34.3" fill="#ef4444" rx="1.5" opacity="0.75"/>
          <!-- Day 6: ~3100 RED -->
          <rect x="91.6" y="22" width="8" height="43" fill="#ef4444" rx="1.5" opacity="0.75"/>
          <!-- Day 7: ~2850 RED -->
          <rect x="105.4" y="25.4" width="8" height="39.6" fill="#ef4444" rx="1.5" opacity="0.75"/>
          <!-- Day 8: ~2500 RED -->
          <rect x="119.1" y="30.3" width="8" height="34.7" fill="#ef4444" rx="1.5" opacity="0.75"/>
          <!-- Day 9: ~2236 GREEN -->
          <rect x="132.9" y="34" width="8" height="31" fill="#22c55e" rx="1.5" opacity="0.75"/>
          <!-- Day 10: ~3560 RED -->
          <rect x="146.6" y="15.6" width="8" height="49.4" fill="#ef4444" rx="1.5" opacity="0.75"/>
          <!-- Day 11: ~3170 RED -->
          <rect x="160.4" y="21" width="8" height="44" fill="#ef4444" rx="1.5" opacity="0.75"/>
          <!-- Day 12: ~2710 RED -->
          <rect x="174.1" y="27.5" width="8" height="37.5" fill="#ef4444" rx="1.5" opacity="0.75"/>

          <!-- Remaining days (13-28) as empty placeholders -->
          <rect x="187.9" y="58" width="8" height="7" fill="#f3f4f6" rx="1.5"/>
          <rect x="201.6" y="58" width="8" height="7" fill="#f3f4f6" rx="1.5"/>
          <rect x="215.4" y="58" width="8" height="7" fill="#f3f4f6" rx="1.5"/>
          <rect x="229.1" y="58" width="8" height="7" fill="#f3f4f6" rx="1.5"/>
          <rect x="242.9" y="58" width="8" height="7" fill="#f3f4f6" rx="1.5"/>
          <rect x="256.6" y="58" width="8" height="7" fill="#f3f4f6" rx="1.5"/>
          <rect x="270.4" y="58" width="8" height="7" fill="#f3f4f6" rx="1.5"/>
          <rect x="284.1" y="58" width="8" height="7" fill="#f3f4f6" rx="1.5"/>
          <rect x="297.9" y="58" width="8" height="7" fill="#f3f4f6" rx="1.5"/>
          <rect x="311.6" y="58" width="8" height="7" fill="#f3f4f6" rx="1.5"/>
          <rect x="325.4" y="58" width="8" height="7" fill="#f3f4f6" rx="1.5"/>
          <rect x="339.1" y="58" width="8" height="7" fill="#f3f4f6" rx="1.5"/>
          <rect x="352.9" y="58" width="8" height="7" fill="#f3f4f6" rx="1.5"/>
          <rect x="366.6" y="58" width="8" height="7" fill="#f3f4f6" rx="1.5"/>
          <rect x="380.4" y="58" width="8" height="7" fill="#f3f4f6" rx="1.5"/>
          <rect x="394.1" y="58" width="8" height="7" fill="#f3f4f6" rx="1.5"/>

          <!-- X axis labels — just first/mid/last -->
          <text x="26"  y="76" text-anchor="middle" font-size="8" fill="#9ca3af">1</text>
          <text x="216" y="76" text-anchor="middle" font-size="8" fill="#9ca3af">15</text>
          <text x="398" y="76" text-anchor="middle" font-size="8" fill="#9ca3af">28</text>
        </svg>

        <div class="flex items-center gap-4 mt-1 text-[11px] text-gray-500">
          <div class="flex items-center gap-1"><div class="w-2 h-2 rounded bg-green-500 opacity-75"></div> Under budget</div>
          <div class="flex items-center gap-1"><div class="w-2 h-2 rounded bg-red-500 opacity-75"></div> Over budget</div>
          <div class="flex items-center gap-1"><div class="w-2 h-2 rounded bg-gray-200"></div> No data</div>
        </div>
      </div>

      <!-- Monthly summary stats -->
      <div class="bg-white rounded-xl border border-gray-200 p-4 shadow-sm">
        <h3 class="text-sm font-semibold text-gray-700 mb-3">Month so far <span class="font-normal text-gray-400">(12 days)</span></h3>
        <div class="grid grid-cols-2 gap-3 text-sm">
          <div class="bg-gray-50 rounded-lg p-3">
            <div class="text-xs text-gray-400 mb-0.5">Days under budget</div>
            <div class="font-bold text-gray-900">2 <span class="text-xs font-normal text-gray-400">/ 12</span></div>
          </div>
          <div class="bg-gray-50 rounded-lg p-3">
            <div class="text-xs text-gray-400 mb-0.5">Avg net calories</div>
            <div class="font-bold text-gray-900">2,931</div>
          </div>
          <div class="bg-gray-50 rounded-lg p-3">
            <div class="text-xs text-gray-400 mb-0.5">Total over budget</div>
            <div class="font-bold text-red-600">7,572 cal</div>
          </div>
          <div class="bg-gray-50 rounded-lg p-3">
            <div class="text-xs text-gray-400 mb-0.5">Weight change</div>
            <div class="font-bold text-green-600">−4.2 lbs</div>
          </div>
        </div>
      </div>

    </div><!-- /monthly tab -->

  </main>

  <!-- FAB group — weight log always visible; "+" only in daily tab -->
  <div class="fixed bottom-6 right-6 flex flex-col items-center gap-3 z-20">
    <!-- Weight log button (all tabs) -->
    <button id="fab-weight"
      onclick="alert('Log weight — opens a modal to enter today\'s weight.\n(In the real app this saves to weight history.)')"
      class="w-12 h-12 bg-white hover:bg-gray-50 border-2 border-gray-200 hover:border-stride-300 rounded-full shadow-md flex items-center justify-center transition-all active:scale-95"
      title="Log weight">
      <svg class="w-5 h-5 text-gray-500" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
        <!-- Scale / weight icon -->
        <path stroke-linecap="round" stroke-linejoin="round" d="M12 3C8.5 3 6 5.5 6 8h12c0-2.5-2.5-5-6-5Z"/>
        <path stroke-linecap="round" stroke-linejoin="round" d="M3 8h18l-2 13H5L3 8Z"/>
        <path stroke-linecap="round" stroke-linejoin="round" d="M9 12h6"/>
      </svg>
    </button>
    <!-- Add item button (daily tab only) -->
    <button id="fab-add"
      class="w-14 h-14 bg-stride-600 hover:bg-stride-700 rounded-full shadow-lg text-white flex items-center justify-center text-3xl font-light leading-none active:scale-95 transition-transform">
      +
    </button>
  </div>

  <!-- ─── Scripts ──────────────────────────────────────────────────── -->
  <script>
    // Tab switching — 3 tabs: daily, summary (weekly), monthly
    function showTab(tab) {
      ['daily', 'summary', 'monthly'].forEach(t => {
        const content = document.getElementById('tab-' + t)
        const btn = document.getElementById('tab-btn-' + t)
        if (t === tab) {
          content.classList.remove('hidden')
          btn.classList.add('bg-white', 'shadow-sm', 'text-gray-900')
          btn.classList.remove('text-gray-500', 'hover:text-gray-700')
        } else {
          content.classList.add('hidden')
          btn.classList.remove('bg-white', 'shadow-sm', 'text-gray-900')
          btn.classList.add('text-gray-500', 'hover:text-gray-700')
        }
      })
      // "+" FAB only makes sense in the daily log tab
      const fabAdd = document.getElementById('fab-add')
      if (fabAdd) fabAdd.style.display = tab === 'daily' ? 'flex' : 'none'
    }

    // Chart bar tooltips
    function showTip(event, date, net, left) {
      const tip = document.getElementById('chart-tooltip')
      const bg = document.getElementById('tip-bg')
      const svg = document.getElementById('week-chart')
      const rect = svg.getBoundingClientRect()
      const svgEl = svg

      // Use SVG coordinate system
      const pt = svgEl.createSVGPoint()
      pt.x = event.clientX
      pt.y = event.clientY
      const svgPt = pt.matrixTransform(svgEl.getScreenCTM().inverse())

      let tx = svgPt.x + 8
      let ty = svgPt.y - 55
      if (tx + 115 > 430) tx = svgPt.x - 118
      if (ty < 5) ty = svgPt.y + 8

      tip.setAttribute('transform', `translate(${tx},${ty})`)
      document.getElementById('tip-date').textContent = date
      document.getElementById('tip-net').textContent = net
      const leftEl = document.getElementById('tip-left')
      leftEl.textContent = left
      leftEl.setAttribute('fill', left.startsWith('+') ? '#22c55e' : '#ef4444')
      tip.setAttribute('opacity', '1')
    }

    function hideTip() {
      document.getElementById('chart-tooltip').setAttribute('opacity', '0')
    }
  </script>

</body>
</html>
